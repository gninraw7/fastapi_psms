<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSMS - 프로젝트 관리 시스템</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tabulator CSS -->
    <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
    
    <!-- SheetJS -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
	
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/navigation.css">
    <link rel="stylesheet" href="/static/css/project-form.css">
	<link rel="stylesheet" href="/static/css/mobile.css">
    <link rel="stylesheet" href="/static/css/clients.css?v=1.0.0">
    <link rel="stylesheet" href="/static/css/breadcrumb.css">

    <!-- ⭐ 인증 관리 스크립트 추가 -->
    <script src="/static/js/auth.js"></script>    
</head>
<body>
    <!-- 인증 확인 스크립트 -->
    <script src="/static/js/auth-check.js"></script>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <i class="fas fa-project-diagram"></i>
                <span>PSMS</span>
            </div>
            
            <ul class="navbar-menu">
                <li class="navbar-item">
                    <a href="#" class="navbar-link">
                        <i class="fas fa-chart-line"></i>
                        영업
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-page="projects-list"><i class="fas fa-list"></i> 프로젝트 목록</a></li>
                        <li><a href="#" data-page="projects-new" data-mode="new"><i class="fas fa-plus-circle"></i> 신규 프로젝트</a></li>
                        <li><a href="#" data-page="clients-list"><i class="fas fa-building"></i> 거래처 관리</a></li>
                        <li class="dropdown-divider"></li>
                        <li><a href="#" data-page="sales-dashboard"><i class="fas fa-tachometer-alt"></i> 영업 대시보드</a></li>
                    </ul>
                </li>
                
                <li class="navbar-item">
                    <a href="#" class="navbar-link">
                        <i class="fas fa-file-signature"></i>
                        계약
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-page="contracts-list"><i class="fas fa-list"></i> 계약 목록</a></li>
                        <li><a href="#" data-page="contracts-new"><i class="fas fa-plus-circle"></i> 계약 등록</a></li>
                        <li class="dropdown-divider"></li>
                        <li><a href="#" data-page="contracts-dashboard"><i class="fas fa-chart-pie"></i> 계약 현황</a></li>
                    </ul>
                </li>
                
                <li class="navbar-item">
                    <a href="#" class="navbar-link">
                        <i class="fas fa-won-sign"></i>
                        매출
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-page="revenue-list"><i class="fas fa-list"></i> 매출 목록</a></li>
                        <li><a href="#" data-page="revenue-new"><i class="fas fa-plus-circle"></i> 매출 등록</a></li>
                        <li class="dropdown-divider"></li>
                        <li><a href="#" data-page="revenue-dashboard"><i class="fas fa-chart-bar"></i> 매출 현황</a></li>
                    </ul>
                </li>
                
                <li class="navbar-item">
                    <a href="#" class="navbar-link">
                        <i class="fas fa-cog"></i>
                        관리자
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-page="users"><i class="fas fa-users"></i> 사용자 관리</a></li>
                        <li><a href="#" data-page="common-codes"><i class="fas fa-code"></i> 공통코드 관리</a></li>
                        <li class="dropdown-divider"></li>
                        <li><a href="#" data-page="settings"><i class="fas fa-sliders-h"></i> 시스템 설정</a></li>
                    </ul>
                </li>
			
				<!-- ⭐ 관리자 메뉴 다음에 Mobile 메뉴 추가 -->
				<li class="navbar-item">
					<a href="#" class="navbar-link">
						<i class="fas fa-mobile-alt"></i>
						<span>Mobile</span>
					</a>
					<ul class="dropdown-menu">
						<li>
							<a href="#" data-page="mobile-projects">
								<i class="fas fa-list"></i>
								프로젝트 목록
							</a>
						</li>
						<li>
							<a href="#" data-page="mobile-project-new">
								<i class="fas fa-plus-circle"></i>
								프로젝트 등록
							</a>
						</li>
						<li>
							<a href="#" data-page="mobile-history-new">
								<i class="fas fa-history"></i>
								이력 등록
							</a>
						</li>
					</ul>
				</li>
			</ul>			
            
            <div class="navbar-user">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="currentUser">사용자</span>
                </div>
                <div class="user-menu">
                    <button class="btn-icon" title="내정보" onclick="openMyInfo()">
                        <i class="fas fa-user-cog"></i>
                    </button>
                    <button class="btn-icon" title="로그아웃" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div id="app-content">
        <!-- 프로젝트 목록 페이지 -->
        <div id="page-projects-list" class="page-content active">
            <main class="app-main">
                <!-- 통계 패널 -->
                <div class="stats-panel">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="statTotal">0</div>
                            <div class="stat-label">전체 프로젝트</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="statProgress">0</div>
                            <div class="stat-label">진행중</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="statCompleted">0</div>
                            <div class="stat-label">완료</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-won-sign"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="statAmount">0원</div>
                            <div class="stat-label">총 견적금액</div>
                        </div>
                    </div>
                </div>

                <!-- 필터 패널 -->
                <div class="filter-panel">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label><i class="fas fa-search"></i> 검색필드</label>
                            <select id="searchField" class="form-select">
                                <option value="">전체</option>
                                <option value="pipeline_id">파이프라인ID</option>
                                <option value="project_name">프로젝트명</option>
                                <option value="customer_name">고객사</option>
                            </select>
                        </div>
                        
                        <div class="filter-group" style="flex: 2;">
                            <label><i class="fas fa-keyboard"></i> 검색어</label>
                            <input type="text" id="searchText" class="form-input" placeholder="검색어를 입력하세요">
                        </div>
                        
                        <div class="filter-group" style="flex: 0 0 auto;">
                            <label>&nbsp;</label>
                            <button id="btnSearch" class="btn btn-secondary">
                                <i class="fas fa-search"></i> 검색
                            </button>
                        </div>

                        
                        <div class="filter-group">
                            <label><i class="fas fa-user"></i> 담당자</label>
                            <select id="filterManager" class="form-select">
                                <option value="">전체</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label><i class="fas fa-briefcase"></i> 사업분야</label>
                            <select id="filterField" class="form-select">
                                <option value="">전체</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label><i class="fas fa-flag"></i> 진행단계</label>
                            <select id="filterStage" class="form-select">
                                <option value="">전체</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-actions">
                        <button id="btnAdd" class="btn btn-primary" title="새 프로젝트 추가">
                            <i class="fas fa-plus-circle"></i> 신규
                        </button>
                        <button id="btnRefresh" class="btn btn-info">
                            <i class="fas fa-sync-alt"></i> 새로고침
                        </button>
                        <button id="btnExport" class="btn btn-success">
                            <i class="fas fa-file-excel"></i> 엑셀
                        </button>

                    </div>
                </div>

                <!-- 테이블 패널 -->
                <div class="table-panel">
                    <div id="projectTable"></div>
                </div>
            </main>
        </div>

        <!-- 프로젝트 신규/수정 페이지 -->
        <div id="page-projects-new" class="page-content">
            <div class="form-container">
                <div class="form-header">
                    <div class="form-title">
                        <i class="fas fa-edit"></i>
                        <h2 id="formTitle">신규 프로젝트</h2>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveProject()" title="저장">
                            <i class="fas fa-save"></i> 저장
                        </button>
                        <button class="btn btn-outline-secondary" onclick="closeProjectForm()" title="목록으로">
                            <i class="fas fa-list"></i> 목록
                        </button>
                        <button class="btn btn-close-icon" onclick="closeProjectForm()" title="닫기">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- 탭 네비게이션 -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="basic">
                        <i class="fas fa-info-circle"></i> 기본정보
                    </button>
                    <button class="tab-btn" data-tab="attributes">
                        <i class="fas fa-tags"></i> 속성정보
                    </button>
                    <button class="tab-btn" data-tab="history">
                        <i class="fas fa-history"></i> 변경이력
                    </button>
                </div>

                <!-- 탭 컨텐츠 -->
                <div class="tab-content">
                    <!-- ============================================ -->
                    <!-- 기본정보 탭 (1.1, 1.2, 1.3 수정 반영) -->
                    <!-- ============================================ -->
                    <div id="tab-basic" class="tab-pane active">
                        <div class="form-grid">
                            <!-- 파이프라인 ID -->
                            <div class="form-group">
                                <label>파이프라인 ID <span class="required">*</span></label>
                                <input type="text" id="pipeline_id" class="form-input" readonly>
                                <small class="form-help">자동 생성됩니다</small>
                            </div>

                            <!-- 1.1 진행단계 (API에서 STAGE 코드 로드) -->
                            <div class="form-group">
                                <label>진행단계 <span class="required">*</span></label>
                                <select id="current_stage" class="form-select" required>
                                    <option value="">선택하세요</option>
                                    <!-- loadFormComboBoxes()에서 동적 로드 -->
                                </select>
                            </div>

                            <!-- 프로젝트명 -->
                            <div class="form-group full-width">
                                <label>프로젝트명 <span class="required">*</span></label>
                                <input type="text" id="project_name" class="form-input" placeholder="프로젝트명을 입력하세요" required>
                            </div>

                            <!-- 사업분야 -->
                            <div class="form-group">
                                <label>사업분야 <span class="required">*</span></label>
                                <select id="field_code" class="form-select" required>
                                    <option value="">선택하세요</option>
                                </select>
                            </div>

                            <!-- 1.1 담당자 (API 응답 형식 수정) -->
                            <div class="form-group">
                                <label>담당자 <span class="required">*</span></label>
                                <select id="manager_id" class="form-select" required>
                                    <option value="">선택하세요</option>
                                    <!-- loadFormComboBoxes()에서 동적 로드 -->
                                </select>
                            </div>

                            <!-- 1.2 고객사 (검색 모달 연동) -->
                            <div class="form-group">
                                <label>고객사 <span class="required">*</span></label>
                                <input type="hidden" id="customer_id">
                                <div class="input-group">
                                    <input type="text" id="customer_name" class="form-input" placeholder="클릭하여 검색" readonly style="cursor: pointer;">
                                    <button type="button" id="customer_search_btn" class="btn btn-secondary btn-sm">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('customer_id').value=''; document.getElementById('customer_name').value='';">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- 1.2 발주처 (검색 모달 연동) -->
                            <div class="form-group">
                                <label>발주처</label>
                                <input type="hidden" id="ordering_party_id">
                                <div class="input-group">
                                    <input type="text" id="ordering_party_name" class="form-input" placeholder="클릭하여 검색" readonly style="cursor: pointer;">
                                    <button type="button" id="ordering_party_search_btn" class="btn btn-secondary btn-sm">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('ordering_party_id').value=''; document.getElementById('ordering_party_name').value='';">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- 견적금액 -->
                            <div class="form-group">
                                <label>견적금액</label>
                                <input type="number" id="quoted_amount" class="form-input" placeholder="0" min="0">
                            </div>

                            <!-- 1.3 수주확률 (신규 컬럼) -->
                            <div class="form-group">
                                <label>수주확률 (%)</label>
                                <input type="number" id="win_probability" class="form-input" placeholder="0" min="0" max="100">
                                <small class="form-help">0 ~ 100 사이 값 입력</small>
                            </div>

                            <!-- 1.3 비고 (신규 컬럼) -->
                            <div class="form-group full-width">
                                <label>비고</label>
                                <textarea id="notes" class="form-textarea" rows="3" placeholder="비고 내용을 입력하세요"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- ============================================ -->
                    <!-- 속성정보 탭 (2.1 수정 반영) -->
                    <!-- ============================================ -->
                    <div id="tab-attributes" class="tab-pane">
                        <div class="tab-description">
                            <i class="fas fa-info-circle"></i>
                            프로젝트 속성을 관리합니다. 속성명은 중복 등록할 수 없습니다.
                        </div>
                        <div id="attributesList">
                            <!-- renderAttributes()에서 동적 생성 -->
                        </div>
                    </div>

                    <!-- ============================================ -->
                    <!-- 변경이력 탭 (3.1 수정 반영) -->
                    <!-- ============================================ -->
                    <div id="tab-history" class="tab-pane">
                        <div class="tab-description">
                            <i class="fas fa-info-circle"></i>
                            프로젝트 진행 이력을 관리합니다. 신규 등록시 기본 단계는 "1 영업중(S01)", 수정시에는 현재 진행단계가 기본값으로 설정됩니다.
                        </div>
                        
                        <!-- ⭐ 마크다운 포맷팅 옵션 (신규 추가) -->
                        <div class="markdown-format-option" style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 0.875rem 1.25rem;
                            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf3 100%);
                            border-radius: 8px;
                            margin-bottom: 1rem;
                            border: 1px solid #d8dce6;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.04);
                        ">
                            <label for="enable_markdown_formatting" style="
                                display: flex;
                                align-items: center;
                                gap: 0.75rem;
                                cursor: pointer;
                                user-select: none;
                                flex: 1;
                            ">
                                <!-- 체크박스 -->
                                <input 
                                    type="checkbox" 
                                    id="enable_markdown_formatting"
                                    onchange="toggleMarkdownFormatting(this.checked)"
                                    style="
                                        width: 20px;
                                        height: 20px;
                                        cursor: pointer;
                                        accent-color: #667eea;
                                    "
                                >
                                
                                <span style="
                                    font-weight: 600;
                                    color: #2c3e50;
                                    font-size: 0.9rem;
                                    display: flex;
                                    align-items: center;
                                    gap: 0.5rem;
                                ">
                                    <i class="fas fa-magic" style="color: #667eea;"></i>
                                    스마트 포맷팅 사용
                                    <span style="
                                        font-size: 0.75rem;
                                        font-weight: 400;
                                        color: #7f8c8d;
                                        background: white;
                                        padding: 0.15rem 0.5rem;
                                        border-radius: 4px;
                                    ">
                                        마크다운 자동 변환
                                    </span>
                                </span>
                            </label>
                            
                            <!-- 도움말 버튼 -->
                            <button 
                                type="button"
                                onclick="showMarkdownGuide()"
                                style="
                                    background: white;
                                    border: 1.5px solid #667eea;
                                    color: #667eea;
                                    padding: 0.5rem 1rem;
                                    border-radius: 6px;
                                    font-size: 0.85rem;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.2s;
                                    display: flex;
                                    align-items: center;
                                    gap: 0.5rem;
                                "
                                onmouseover="this.style.background='#667eea'; this.style.color='white'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(102,126,234,0.3)';"
                                onmouseout="this.style.background='white'; this.style.color='#667eea'; this.style.transform='translateY(0)'; this.style.boxShadow='none';"
                            >
                                <i class="fas fa-book-open"></i>
                                문법 가이드
                            </button>
                        </div>
                        
                        <div id="historiesList">
                            <!-- renderHistories()에서 동적 생성 -->
                        </div>
                    </div>

                </div>
            </div>
        </div>

 

        <!-- 준비중 페이지들 (기존과 동일) -->

        <!-- ============================================ -->
        <!-- 1.2 고객사/발주처 검색 모달 (신규 추가) -->
        <!-- ============================================ -->
        <div id="clientSearchModal" class="modal" style="display: none;">
            <div class="modal-content modal-medium">
                <div class="modal-header">
                    <h2>
                        <i class="fas fa-building"></i>
                        고객사/발주처 검색
                    </h2>
                    <button class="modal-close" onclick="closeClientSearchModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- 검색 영역 -->
                    <div class="search-box">
                        <div class="input-group">
                            <input type="text" id="clientSearchInput" class="form-input" 
                                placeholder="고객사명, 사업자번호, 대표자명으로 검색"
                                onkeypress="if(event.key==='Enter') searchClients()">
                            <button type="button" class="btn btn-primary" onclick="searchClients()">
                                <i class="fas fa-search"></i> 검색
                            </button>
                        </div>
                    </div>
                    
                    <!-- 검색 결과 -->
                    <div id="clientSearchResults" class="client-search-results">
                        <p style="text-align: center; padding: 20px; color: #666;">
                            검색어를 입력하세요
                        </p>
                    </div>
                    
                    <!-- 페이징 -->
                    <div id="clientSearchPagination" class="pagination-container">
                    </div>
                </div>
            </div>
        </div>
        
    <!-- ========================================
         Mobile: 프로젝트 목록
         ======================================== -->
    <div id="page-mobile-projects" class="page-content mobile-page">
        <div class="mobile-container">
            <!-- 헤더 -->
            <div class="mobile-header">
                <h2><i class="fas fa-list"></i> 프로젝트 목록</h2>
                <button class="btn-mobile btn-mobile-primary" onclick="navigateTo('mobile-project-new')">
                    <i class="fas fa-plus"></i> 신규
                </button>
            </div>
            
            <!-- 검색 필터 -->
            <div class="mobile-filter">
                <div class="mobile-search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="mobileSearchInput" placeholder="프로젝트명, 거래처명 검색...">
                </div>
                
                <div class="mobile-filter-row">
                    <select id="mobileStageFilter" class="mobile-select">
                        <option value="">전체 진행단계</option>
                    </select>
                    
                    <select id="mobileYearFilter" class="mobile-select">
                        <option value="">전체 연도</option>
                    </select>
                </div>
            </div>
            
            <!-- 통계 카드 -->
            <div class="mobile-stats">
                <div class="mobile-stat-item">
                    <div class="mobile-stat-label">전체</div>
                    <div class="mobile-stat-value" id="mobileTotalCount">0</div>
                </div>
                <div class="mobile-stat-item">
                    <div class="mobile-stat-label">진행중</div>
                    <div class="mobile-stat-value" id="mobileActiveCount">0</div>
                </div>
                <div class="mobile-stat-item">
                    <div class="mobile-stat-label">완료</div>
                    <div class="mobile-stat-value" id="mobileCompleteCount">0</div>
                </div>
            </div>
            
            <!-- 프로젝트 목록 -->
            <div id="mobileProjectList" class="mobile-project-list">
                <!-- 동적 생성 -->
            </div>
        </div>
    </div>
    
	<!-- ========================================
		 Mobile: 프로젝트 등록/수정 (수정됨)
		 ======================================== -->
	<div id="page-mobile-project-new" class="page-content mobile-page">
		<div class="mobile-container">
			<!-- 헤더 -->
			<div class="mobile-header">
				<button class="btn-mobile-back" onclick="navigateTo('mobile-projects')">
					<i class="fas fa-arrow-left"></i>
				</button>
				<h2 id="mobileFormTitle">프로젝트 등록</h2>
				<button class="btn-mobile-icon" onclick="saveMobileProject()">
					<i class="fas fa-save"></i>
				</button>
			</div>
			
			<!-- 프로젝트 등록/수정 폼 -->
			<form id="mobileProjectForm" class="mobile-form" onsubmit="event.preventDefault(); saveMobileProject();">			
				<input type="hidden" id="mobilePipelineId">
				
				<!-- 분야 (FIELD) -->
				<div class="mobile-form-group">
					<label>분야 <span class="required">*</span></label>
					<select id="mobileFieldCode" required>
						<option value="">선택하세요</option>
					</select>
				</div>
				
				<!-- 고객사 (검색) -->
				<div class="mobile-form-group">
					<label>고객사 <span class="required">*</span></label>
					<div class="mobile-search-field">
						<input type="hidden" id="mobileCustomerId" required>
						<input 
							type="text" 
							id="mobileCustomerSearch" 
							placeholder="고객사명을 검색하세요..."
							autocomplete="off"
							readonly
							onclick="openMobileClientSearch('customer')"
						>
						<button type="button" class="btn-search" onclick="openMobileClientSearch('customer')">
							<i class="fas fa-search"></i>
						</button>
					</div>
					<div class="mobile-field-help">
						<i class="fas fa-info-circle"></i> 탭하여 고객사를 검색하세요
					</div>
				</div>
				
				<!-- 발주처 (검색) -->
				<div class="mobile-form-group">
					<label>발주처</label>
					<div class="mobile-search-field">
						<input type="hidden" id="mobileOrderingPartyId">
						<input 
							type="text" 
							id="mobileOrderingPartySearch" 
							placeholder="발주처명을 검색하세요..."
							autocomplete="off"
							readonly
							onclick="openMobileClientSearch('ordering')"
						>
						<button type="button" class="btn-search" onclick="openMobileClientSearch('ordering')">
							<i class="fas fa-search"></i>
						</button>
						<button type="button" class="btn-clear" onclick="clearMobileClient('ordering')" style="display: none;">
							<i class="fas fa-times"></i>
						</button>
					</div>
					<div class="mobile-field-help">
						<i class="fas fa-info-circle"></i> 고객사와 다른 경우만 입력
					</div>
				</div>
				
				<!-- 프로젝트명 -->
				<div class="mobile-form-group">
					<label>프로젝트명 <span class="required">*</span></label>
					<input type="text" id="mobileProjectName" required placeholder="프로젝트명을 입력하세요">
				</div>
				
				<!-- 진행단계 (STAGE) -->
				<div class="mobile-form-group">
					<label>진행단계 <span class="required">*</span></label>
					<select id="mobileCurrentStage" required>
						<option value="">선택하세요</option>
					</select>
				</div>
				
				<!-- 담당자 -->
				<div class="mobile-form-group">
					<label>담당자</label>
					<select id="mobileManagerId">
						<option value="">선택하세요</option>
					</select>
				</div>

				<!-- 프로젝트 등록/수정 폼에서 다음 필드들을 주석 처리 또는 제거 -->
				<!-- 				
				<div class="mobile-form-row">
					<div class="mobile-form-group">
						<label>연도</label>
						<input type="number" id="mobileYear" min="2020" max="2030">
					</div>
					
					<div class="mobile-form-group">
						<label>분기</label>
						<select id="mobileQuarter">
							<option value="">-</option>
							<option value="1">1분기</option>
							<option value="2">2분기</option>
							<option value="3">3분기</option>
							<option value="4">4분기</option>
						</select>
					</div>
				</div>
				
				<div class="mobile-form-group">
					<label>예상금액 (천원)</label>
					<input type="number" id="mobileExpectedAmount" step="1000" placeholder="0">
				</div>
				
				<div class="mobile-form-group">
					<label>확정금액 (천원)</label>
					<input type="number" id="mobileConfirmedAmount" step="1000" placeholder="0">
				</div>
				-->
				
				<!-- 비고 -->
				<div class="mobile-form-group">
					<label>비고</label>
					<textarea id="mobileRemarks" rows="3" placeholder="비고사항을 입력하세요"></textarea>
				</div>
				
				<!-- 액션 버튼 -->
				<div class="mobile-form-actions">
					<button type="button" class="btn-mobile btn-mobile-secondary" onclick="navigateTo('mobile-projects')">
						<i class="fas fa-times"></i> 취소
					</button>
					<button type="submit" class="btn-mobile btn-mobile-primary">
						<i class="fas fa-save"></i> 저장
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- ========================================
		 Mobile: 이력 등록
		 ======================================== -->
	<div id="page-mobile-history-new" class="page-content mobile-page">
		<div class="mobile-container">
			<!-- 헤더 -->
			<div class="mobile-header">
				<button class="btn-mobile-back" onclick="navigateTo('mobile-projects')">
					<i class="fas fa-arrow-left"></i>
				</button>
				<h2>이력 등록</h2>
				<button class="btn-mobile-icon" onclick="saveMobileHistory()">
					<i class="fas fa-save"></i>
				</button>
			</div>
			
			<!-- 폼 -->
			<form id="mobileHistoryForm" class="mobile-form" onsubmit="event.preventDefault(); saveMobileHistory();">
				
				<!-- 프로젝트 선택 -->
				<div class="mobile-form-group">
					<label>프로젝트 <span class="required">*</span></label>
					<select id="mobileHistoryProject" required onchange="loadMobileProjectInfo()">
						<option value="">프로젝트를 선택하세요</option>
					</select>
				</div>
				
				<!-- 선택된 프로젝트 정보 -->
				<div id="mobileProjectInfo" class="mobile-project-info" style="display: none;">
					<div class="mobile-info-row">
						<span class="mobile-info-label">고객사:</span>
						<span id="mobileInfoClient">-</span>
					</div>
					<div class="mobile-info-row">
						<span class="mobile-info-label">현재단계:</span>
						<span id="mobileInfoStage"></span>
					</div>
				</div>
				
				<!-- 이력 일자 -->
				<div class="mobile-form-group">
					<label>이력 일자 <span class="required">*</span></label>
					<input type="date" id="mobileHistoryDate" required>
				</div>
				
				<!-- 진행단계 -->
				<div class="mobile-form-group">
					<label>진행단계 <span class="required">*</span></label>
					<select id="mobileHistoryStage" required>
						<option value="">선택하세요</option>
					</select>
				</div>
				
				<!-- 이력 내용 -->
				<div class="mobile-form-group">
					<label>이력 내용 <span class="required">*</span></label>
					<textarea 
						id="mobileHistoryContent" 
						rows="6" 
						required 
						placeholder="영업 활동 내용, 진행 상황 등을 입력하세요..."
					></textarea>
				</div>
				
				<!-- 액션 버튼 -->
				<div class="mobile-form-actions">
					<button type="button" class="btn-mobile btn-mobile-secondary" onclick="resetMobileHistoryForm()">
						<i class="fas fa-redo"></i> 초기화
					</button>
					<button type="submit" class="btn-mobile btn-mobile-primary">
						<i class="fas fa-save"></i> 저장
					</button>
				</div>
			</form>
		</div>
	</div>
	
	<!-- ========================================
		 Mobile: 거래처 검색 모달
		 ======================================== -->
	<div id="mobileClientSearchModal" class="mobile-modal" style="display: none;">
		<div class="mobile-modal-content">
			<!-- 모달 헤더 -->
			<div class="mobile-modal-header">
				<h3 id="mobileClientSearchTitle">거래처 검색</h3>
				<button class="btn-mobile-close" onclick="closeMobileClientSearch()">
					<i class="fas fa-times"></i>
				</button>
			</div>
			
			<!-- 검색 입력 -->
			<div class="mobile-modal-search">
				<div class="mobile-search-box">
					<i class="fas fa-search"></i>
					<input 
						type="text" 
						id="mobileClientSearchInput" 
						placeholder="거래처명을 입력하세요..."
						autocomplete="off"
					>
				</div>
			</div>
			
			<!-- 검색 결과 -->
			<div class="mobile-modal-body">
				<div id="mobileClientSearchResults" class="mobile-client-list">
					<!-- 동적 생성 -->
				</div>
			</div>
		</div>
    </div>
        <!-- 나머지 준비중 페이지들... -->

    <!-- ===================================
         거래처 관리 - 목록 페이지
         =================================== -->
    <div id="page-clients-list" class="page-content">
        <main class="app-main">
            <!-- 통계 패널 -->
            <div class="stats-panel">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="statTotal">0</div>
                        <div class="stat-label">전체 거래처</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="statActive">0</div>
                        <div class="stat-label">활성 거래처</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <i class="fas fa-pause-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="statInactive">0</div>
                        <div class="stat-label">비활성 거래처</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <i class="fas fa-filter"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="statFiltered">0</div>
                        <div class="stat-label">필터링 결과</div>
                    </div>
                </div>
            </div>

            <!-- 필터 패널 -->
            <div class="filter-panel">
                <div class="filter-row">
                    <div class="filter-group">
                        <label><i class="fas fa-search"></i> 검색 구분</label>
                        <select id="clientSearchField" class="form-select">
                            <option value="">전체</option>
                            <option value="client_name">거래처명</option>
                            <option value="business_number">사업자번호</option>
                            <option value="ceo_name">대표자명</option>
                            <option value="phone">전화번호</option>
                        </select>
                    </div>
                    
                    <div class="filter-group" style="flex: 2;">
                        <label><i class="fas fa-keyboard"></i> 검색어</label>
                        <input 
                            type="text" 
                            id="clientSearchText" 
                            class="form-input" 
                            placeholder="검색어를 입력하세요"
                        />
                    </div>
                    
                    <div class="filter-group" style="flex: 0 0 auto;">
                        <label>&nbsp;</label>
                        <button class="btn btn-secondary" onclick="applyClientFilters()">
                            <i class="fas fa-search"></i> 검색
                        </button>
                    </div>
                    
                    <div class="filter-group">
                        <label><i class="fas fa-industry"></i> 업종</label>
                        <select id="clientIndustryType" class="form-select">
                            <option value="">전체</option>
                            <option value="제조업">제조업</option>
                            <option value="서비스업">서비스업</option>
                            <option value="건설업">건설업</option>
                            <option value="IT/소프트웨어">IT/소프트웨어</option>
                            <option value="유통/도소매">유통/도소매</option>
                            <option value="금융/보험">금융/보험</option>
                            <option value="교육">교육</option>
                            <option value="의료/헬스케어">의료/헬스케어</option>
                            <option value="공공기관">공공기관</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label><i class="fas fa-toggle-on"></i> 활성 상태</label>
                        <select id="clientIsActive" class="form-select">
                            <option value="">전체</option>
                            <option value="true">활성</option>
                            <option value="false">비활성</option>
                        </select>
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button class="btn btn-primary" id="btnNewClient" type="button" title="새 거래처 추가">
                        <i class="fas fa-plus-circle"></i> 신규
                    </button>
                    <button class="btn btn-info" onclick="resetClientFilters()">
                        <i class="fas fa-sync-alt"></i> 새로고침
                    </button>
                    <button class="btn btn-success" onclick="exportClientsToExcel()">
                        <i class="fas fa-file-excel"></i> 엑셀
                    </button>
                </div>
            </div>

            <!-- 테이블 패널 -->
            <div class="table-panel">
                <div id="clientsTable"></div>
            </div>
        </main>
    </div>


    <!-- ===================================
         거래처 관리 - 등록/수정 페이지
         =================================== -->
    <div id="page-clients-form" class="page-content">
        <div class="form-container client-form-container">
            <div class="form-header">
                <div class="form-title">
                    <i class="fas fa-building"></i>
                    <h2 id="clientFormTitleText">신규 거래처 등록</h2>
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" type="button" onclick="saveClientForm()">
                        <i class="fas fa-save"></i> 저장
                    </button>
                    <button class="btn btn-outline-secondary" type="button" data-client-nav="list">
                        <i class="fas fa-list"></i> 목록
                    </button>
                    <button class="btn btn-danger" type="button" id="btnDeleteClient" onclick="deleteClient()" style="display: none;">
                        <i class="fas fa-trash"></i> 삭제
                    </button>
                    <button class="btn btn-close-icon" type="button" data-client-nav="close" title="닫기">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- 거래처 폼 -->
            <form id="clientForm" class="tab-content client-form" onsubmit="event.preventDefault(); saveClientForm();">
                <input type="hidden" id="clientId">
                <input type="hidden" id="clientMode" value="new">

                <!-- 기본 정보 섹션 -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-info-circle"></i>
                        기본 정보
                    </h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName" class="required">거래처명</label>
                            <input type="text" id="clientName" class="form-input" required placeholder="거래처명을 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label for="businessNumber">사업자번호</label>
                            <input type="text" id="businessNumber" class="form-input" placeholder="000-00-00000" maxlength="12">
                            <span class="form-hint">000-00-00000 형식으로 입력하세요</span>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ceoName">대표자명</label>
                            <input type="text" id="ceoName" class="form-input" placeholder="대표자명을 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label for="industryType">업종</label>
                            <select id="industryType" class="form-select">
                                <option value="">선택하세요</option>
                                <option value="제조업">제조업</option>
                                <option value="서비스업">서비스업</option>
                                <option value="건설업">건설업</option>
                                <option value="IT/소프트웨어">IT/소프트웨어</option>
                                <option value="유통/도소매">유통/도소매</option>
                                <option value="금융/보험">금융/보험</option>
                                <option value="교육">교육</option>
                                <option value="의료/헬스케어">의료/헬스케어</option>
                                <option value="공공기관">공공기관</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="establishedDate">설립일</label>
                            <input type="date" id="establishedDate" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label for="employeeCount">직원 수</label>
                            <input type="number" id="employeeCount" class="form-input" min="0" placeholder="직원 수">
                        </div>
                    </div>
                </div>

                <!-- 연락처 정보 섹션 -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-phone"></i>
                        연락처 정보
                    </h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="address">주소</label>
                            <input type="text" id="address" class="form-input" placeholder="주소를 입력하세요">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">전화번호</label>
                            <input type="tel" id="phone" class="form-input" placeholder="02-0000-0000">
                            <span class="form-hint">지역번호 포함 입력 (예: 02-0000-0000)</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="fax">팩스번호</label>
                            <input type="tel" id="fax" class="form-input" placeholder="02-0000-0000">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">이메일</label>
                            <input type="email" id="email" class="form-input" placeholder="example@company.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="homepage">홈페이지</label>
                            <input type="url" id="homepage" class="form-input" placeholder="https://www.example.com">
                        </div>
                    </div>
                </div>

                <!-- 추가 정보 섹션 -->
                <div class="form-section">
                    <h2 class="section-title">
                        <i class="fas fa-cog"></i>
                        추가 정보
                    </h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="isActive">활성 상태</label>
                            <div class="form-switch-group">
                                <label class="form-switch">
                                    <input type="checkbox" id="isActive" class="form-switch-input" checked>
                                    <span class="form-switch-slider"></span>
                                </label>
                                <span class="form-switch-label">활성</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="remarks">비고</label>
                            <textarea id="remarks" class="form-textarea" rows="4" placeholder="비고사항을 입력하세요"></textarea>
                        </div>
                    </div>
                </div>

                <!-- 액션 버튼 (하단 고정) -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary btn-lg" onclick="navigateToClientList()">
                        <i class="fas fa-list"></i>
                        목록으로
                    </button>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i>
                        저장
                    </button>
                    <button type="button" class="btn btn-danger btn-lg" id="btnDeleteClientBottom" onclick="deleteClient()" style="display: none;">
                        <i class="fas fa-trash"></i>
                        삭제
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 모달: 프로젝트 상세 정보 (읽기 전용) -->
    <div id="projectModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-info-circle"></i> 프로젝트 상세 정보</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="modalBody" class="modal-body">
                <p>로딩 중...</p>
            </div>
        </div>
    </div>

    <!-- 로딩 오버레이 -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-circle-notch fa-spin"></i>
            <p>처리중...</p>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 변경이력 수정 모달 (신규 추가) -->
    <!-- ============================================ -->
    <div id="historyEditModal" class="modal" style="display: none;">
        <div class="modal-content modal-medium">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-edit"></i>
                    변경이력 수정
                </h2>
                <button class="modal-close" onclick="closeHistoryEditModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 수정 폼 -->
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- 기준일 -->
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">
                            <i class="far fa-calendar-alt" style="color: #667eea; margin-right: 0.5rem;"></i>
                            기준일 <span class="required">*</span>
                        </label>
                        <input type="date" id="edit_history_date" class="form-input" required>
                    </div>
                    
                    <!-- 진행단계 -->
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">
                            <i class="fas fa-flag" style="color: #667eea; margin-right: 0.5rem;"></i>
                            진행단계 <span class="required">*</span>
                        </label>
                        <select id="edit_history_stage" class="form-select" required>
                            <option value="">진행단계 선택</option>
                            <!-- JavaScript에서 동적으로 채움 -->
                        </select>
                    </div>
                    
                    <!-- 전략 내용 -->
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">
                            <i class="fas fa-file-alt" style="color: #667eea; margin-right: 0.5rem;"></i>
                            전략 내용
                        </label>
                        <textarea 
                            id="edit_history_content" 
                            class="form-textarea" 
                            placeholder="전략 내용을 입력하세요.
    여러 줄로 상세하게 작성할 수 있습니다.
    - 주요 활동 내역
    - 고객 피드백
    - 향후 계획 등"
                            style="
                                width: 100%; 
                                min-height: 120px;
                                max-height: 300px;
                                padding: 0.75rem; 
                                border: 1px solid #ddd; 
                                border-radius: 6px; 
                                font-family: inherit; 
                                font-size: 0.875rem; 
                                line-height: 1.5;
                                resize: vertical;
                                transition: border-color 0.2s, box-shadow 0.2s;
                            "
                            oninput="autoResizeTextarea(this)"
                            onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)';"
                            onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none';"
                        ></textarea>
                        <small style="display: block; margin-top: 0.5rem; color: #666; font-size: 0.75rem;">
                            <i class="fas fa-info-circle"></i> Enter 키로 줄바꿈하여 여러 줄을 입력할 수 있습니다.
                        </small>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 0.75rem; justify-content: flex-end; padding: 1rem 1.5rem; background: #f8f9fa; border-top: 1px solid #e0e0e0;">
                <button type="button" class="btn btn-secondary" onclick="closeHistoryEditModal()">
                    <i class="fas fa-times"></i> 취소
                </button>
                <button type="button" class="btn btn-primary" onclick="saveHistoryEdit()">
                    <i class="fas fa-check"></i> 확인
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts 순서 중요 -->
    <script src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
    <script src="/static/js/config.js?v=2.5"></script>
    <script src="/static/js/auth.js?v=2.5"></script>
    <script src="/static/js/utils.js?v=2.5"></script>
    <script src="/static/js/navigation.js?v=3.0"></script>  <!-- ⭐ 버전 업 (openClientForm 추가됨) -->
    <script src="/static/js/stage-icons.js"></script>
    <script src="/static/js/project-form.js?v=2.5"></script>
    <script src="/static/js/clients-list.js?v=3.0"></script>  <!-- ⭐ 버전 추가 -->
    <script src="/static/js/clients-form.js?v=3.0"></script>  <!-- ⭐ 신규 추가 -->
    <script src="/static/js/app.js?v=2.5"></script>
    <script src="/static/js/mobile.js?v=2.5"></script>
    <script src="/static/js/markdown-formatter.js"></script>


    <!-- ============================================ -->
    <!-- ⭐ 마크다운 가이드 모달 (신규 추가) -->
    <!-- ============================================ -->
    <div id="markdownGuideModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 700px; width: 90%;">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-book-open"></i>
                    마크다운 문법 가이드
                </h2>
                <button class="modal-close" onclick="closeMarkdownGuide()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div style="display: grid; gap: 1.5rem;">
                    
                    <!-- 기본 사용법 -->
                    <div style="background: #e8f5e9; padding: 1rem; border-radius: 8px; border-left: 4px solid #4caf50;">
                        <h4 style="color: #2e7d32; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-lightbulb"></i>
                            기본 사용법
                        </h4>
                        <p style="margin: 0; color: #1b5e20; line-height: 1.6;">
                            라인 시작 부분에 기호를 입력하고 <strong>스페이스</strong>를 누르면 자동으로 변환됩니다.
                            <br><strong>Enter</strong> 키를 누르면 다음 줄에 같은 형식이 자동으로 추가됩니다.
                        </p>
                    </div>
                    
                    <!-- 글머리 기호 -->
                    <div class="guide-section">
                        <h3 style="color: #667eea; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-list-ul"></i>
                            글머리 기호 (Bullet Points)
                        </h3>
                        
                        <div style="display: grid; gap: 1rem;">
                            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center;">
                                <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px; font-family: 'Courier New', monospace; border: 1px solid #e0e0e0;">
                                    <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">입력:</div>
                                    <div>* 첫 번째 항목</div>
                                    <div>- 두 번째 항목</div>
                                    <div>+ 세 번째 항목</div>
                                </div>
                                
                                <div style="font-size: 1.5rem; color: #667eea;">→</div>
                                
                                <div style="background: white; padding: 1rem; border-radius: 6px; border: 1px solid #e0e0e0;">
                                    <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">결과:</div>
                                    <div>• 첫 번째 항목</div>
                                    <div>• 두 번째 항목</div>
                                    <div>• 세 번째 항목</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 번호 목록 -->
                    <div class="guide-section">
                        <h3 style="color: #667eea; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-list-ol"></i>
                            번호 목록 (Numbered List)
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center;">
                            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px; font-family: 'Courier New', monospace; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">입력:</div>
                                <div>1. 첫 번째</div>
                                <div style="color: #999; font-style: italic;">(Enter 누르면 자동으로 2.)</div>
                                <div>2. 두 번째</div>
                                <div>3. 세 번째</div>
                            </div>
                            
                            <div style="font-size: 1.5rem; color: #667eea;">✓</div>
                            
                            <div style="background: white; padding: 1rem; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">결과:</div>
                                <div>1. 첫 번째</div>
                                <div>2. 두 번째</div>
                                <div>3. 세 번째</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 체크리스트 -->
                    <div class="guide-section">
                        <h3 style="color: #667eea; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-check-square"></i>
                            체크리스트 (Checklist)
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center;">
                            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px; font-family: 'Courier New', monospace; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">입력:</div>
                                <div>[ ] 미완료 작업</div>
                                <div>[x] 완료된 작업</div>
                                <div>[X] 완료 (대문자)</div>
                            </div>
                            
                            <div style="font-size: 1.5rem; color: #667eea;">→</div>
                            
                            <div style="background: white; padding: 1rem; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">결과:</div>
                                <div>☐ 미완료 작업</div>
                                <div>☑ 완료된 작업</div>
                                <div>☑ 완료 (대문자)</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 들여쓰기 -->
                    <div class="guide-section">
                        <h3 style="color: #667eea; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-indent"></i>
                            들여쓰기 (Indentation)
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center;">
                            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px; font-family: 'Courier New', monospace; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">입력:</div>
                                <div>* 상위 항목</div>
                                <div style="padding-left: 2rem;">* 하위 항목 (Tab)</div>
                                <div style="padding-left: 4rem;">* 더 하위 (Tab x2)</div>
                            </div>
                            
                            <div style="font-size: 1.5rem; color: #667eea;">→</div>
                            
                            <div style="background: white; padding: 1rem; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="color: #666; font-size: 0.8rem; margin-bottom: 0.5rem;">결과:</div>
                                <div>• 상위 항목</div>
                                <div style="padding-left: 2rem;">• 하위 항목</div>
                                <div style="padding-left: 4rem;">• 더 하위</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 키보드 단축키 -->
                    <div style="background: #fff3e0; padding: 1rem; border-radius: 8px; border-left: 4px solid #ff9800;">
                        <h4 style="color: #e65100; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-keyboard"></i>
                            키보드 단축키
                        </h4>
                        <div style="display: grid; gap: 0.75rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span style="font-weight: 600;"><kbd style="background: #f5f5f5; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 3px; font-family: monospace;">Tab</kbd></span>
                                <span>들여쓰기</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span style="font-weight: 600;"><kbd style="background: #f5f5f5; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 3px; font-family: monospace;">Shift + Tab</kbd></span>
                                <span>내어쓰기</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span style="font-weight: 600;"><kbd style="background: #f5f5f5; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 3px; font-family: monospace;">Enter</kbd></span>
                                <span>다음 줄에 같은 형식 자동 생성</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span style="font-weight: 600;"><kbd style="background: #f5f5f5; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 3px; font-family: monospace;">Enter</kbd> (빈 줄)</span>
                                <span>포맷 종료</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 실전 예제 -->
                    <div style="background: #e3f2fd; padding: 1rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <h4 style="color: #0d47a1; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-star"></i>
                            실전 예제
                        </h4>
                        <div style="background: white; padding: 1rem; border-radius: 6px; font-family: 'Courier New', monospace; line-height: 1.8; border: 1px solid #90caf9;">
                            <div>• 고객사 미팅 완료</div>
                            <div style="padding-left: 2rem;">• 주요 요구사항 확인</div>
                            <div style="padding-left: 2rem;">• 예산 및 일정 논의</div>
                            <div>• 제안서 작성 계획</div>
                            <div style="padding-left: 2rem;">1. 기술 스펙 정리</div>
                            <div style="padding-left: 2rem;">2. 견적 산출</div>
                            <div style="padding-left: 2rem;">3. 발표 자료 준비</div>
                            <div>• 다음 액션 아이템</div>
                            <div style="padding-left: 2rem;">☐ 기술팀 검토 요청</div>
                            <div style="padding-left: 2rem;">☐ 견적서 초안 작성</div>
                            <div style="padding-left: 2rem;">☑ 미팅 노트 공유</div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="closeMarkdownGuide()" style="padding: 0.75rem 2rem;">
                    <i class="fas fa-check"></i> 확인
                </button>
            </div>
        </div>
    </div>

    <script>
    // ⭐ 마크다운 가이드 모달 함수
    function showMarkdownGuide() {
        const modal = document.getElementById('markdownGuideModal');
        if (modal) {
            modal.classList.add('active');
            modal.style.display = 'flex';
        }
    }

    function closeMarkdownGuide() {
        const modal = document.getElementById('markdownGuideModal');
        if (modal) {
            modal.classList.remove('active');
            modal.style.display = 'none';
        }
    }

    // 모달 외부 클릭 시 닫기
    window.addEventListener('click', function(event) {
        const modal = document.getElementById('markdownGuideModal');
        if (modal && event.target === modal) {
            closeMarkdownGuide();
        }
    });
    </script>

</body>
</html>
